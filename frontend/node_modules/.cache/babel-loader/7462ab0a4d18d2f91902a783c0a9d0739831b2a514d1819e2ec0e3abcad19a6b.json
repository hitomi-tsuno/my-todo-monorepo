{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useTodos.ts\n\nimport { useState, useEffect, useRef, useMemo } from \"react\";\nexport const useTodos = () => {\n  _s();\n  // ソートキーの型定義 completed: 完了状態、text: 内容、createdAt: 登録日時\n  // ソート順の型定義 asc: 昇順、desc: 降順\n\n  const [todos, setTodos] = useState([]);\n  const [filter, setFilter] = useState(\"all\");\n  const isInitialized = useRef(false); // 初期化フラグ\n  const [showPopup, setShowPopup] = useState(false); // ポップアップの表示状態\n  const checkedCount = useMemo(() => todos.filter(t => t.completed).length, [todos]); // チェックされたToDoの数\n  const [sortKey, setSortKey] = useState(\"createdAt\");\n  const [sortOrder, setSortOrder] = useState(\"asc\");\n  const [searchText, setSearchText] = useState(\"\"); // 検索テキスト\n\n  // 初期読み込み\n  useEffect(() => {\n    if (isInitialized.current) return;\n    const fetchTodos = async () => {\n      try {\n        const res = await fetch(\"http://localhost/api/todos.php\");\n        const data = await res.json();\n\n        // ★ API のデータを React 用に変換する\n        const converted = data.map(item => {\n          var _item$tags;\n          return {\n            id: item.id,\n            text: item.text,\n            completed: item.isdone === 1,\n            // ← isdone を completed に変換\n            createdAt: new Date().toISOString(),\n            // DB に無いので仮で作成\n            tags: (_item$tags = item.tags) !== null && _item$tags !== void 0 ? _item$tags : \"\"\n          };\n        });\n        setTodos(converted);\n      } catch (error) {\n        console.error(\"API fetch error:\", error);\n      }\n    };\n    fetchTodos();\n    isInitialized.current = true;\n  }, []);\n\n  // 保存処理\n  useEffect(() => {\n    if (!isInitialized.current) return;\n    localStorage.setItem(\"todos\", JSON.stringify(todos));\n    console.log(\"[useEffect保存]todos:\", todos);\n  }, [todos]);\n\n  // 追加\n  const addTodo = async text => {\n    if (!text.trim()) return;\n    try {\n      const res = await fetch(\"http://localhost/api/todos.php\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          text,\n          tags: \"\" // 必要なら後で対応\n        })\n      });\n      const result = await res.json();\n      if (result.success) {\n        // API が返した ID を使ってフロント側にも反映\n        const newTodo = {\n          id: result.id,\n          text,\n          completed: false,\n          createdAt: new Date().toISOString() // DB に createdAt がないのでフロント側で作成\n        };\n        setTodos(prev => [...prev, newTodo]);\n      }\n    } catch (error) {\n      console.error(\"addTodo API error:\", error);\n    }\n  };\n  // 削除\n  const deleteTodo = async id => {\n    try {\n      const target = todos.find(todo => todo.id === id);\n      if (!target) return; // 念のため安全に\n\n      const url = new URL(\"http://localhost/api/todos.php\");\n      url.searchParams.append(\"id\", id.toString());\n      const res = await fetch(url.toString(), {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      const result = await res.json();\n      if (result.success) {\n        setTodos(prev => prev.filter(todo => todo.id !== id));\n      }\n    } catch (error) {\n      console.error(\"deleteTodo API error:\", error);\n    }\n  };\n\n  // 完了切り替え\n  const toggleTodo = async id => {\n    try {\n      const target = todos.find(todo => todo.id === id);\n      if (!target) return; // 念のため安全に\n\n      const newIsDone = target.completed ? 0 : 1;\n      const url = new URL(\"http://localhost/api/todos.php\");\n      url.searchParams.append(\"id\", id.toString());\n      const res = await fetch(url.toString(), {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          isdone: newIsDone\n        })\n      });\n      const result = await res.json();\n      if (result.success) {\n        setTodos(prev => prev.map(todo => todo.id === id ? {\n          ...todo,\n          completed: !todo.completed\n        } : todo));\n      }\n    } catch (error) {\n      console.error(\"toggleTodo API error:\", error);\n    }\n  };\n\n  // 編集\n  const updateTodo = async (id, newText) => {\n    try {\n      const target = todos.find(todo => todo.id === id);\n      if (!target) return; // 念のため安全に\n\n      const url = new URL(\"http://localhost/api/todos.php\");\n      url.searchParams.append(\"id\", id.toString());\n      const res = await fetch(url.toString(), {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          text: newText\n        })\n      });\n      const result = await res.json();\n      if (result.success) {\n        setTodos(prev => prev.map(todo => todo.id === id ? {\n          ...todo,\n          text: newText\n        } : todo));\n      }\n    } catch (error) {\n      console.error(\"updateTodo API error:\", error);\n    }\n  };\n\n  // 一括削除\n  const deleteChecked = async () => {\n    try {\n      const res = await fetch(\"http://localhost/api/todos.php\", {\n        method: \"DELETE\"\n      });\n      const result = await res.json();\n      if (result.success) {\n        setTodos(prev => prev.filter(todo => !todo.completed));\n      }\n    } catch (error) {\n      console.error(\"deleteCompleted API error:\", error);\n    }\n  };\n\n  // 一括完了・未完了\n  const checkAll = () => {\n    setTodos(prev => prev.map(todo => ({\n      ...todo,\n      completed: true\n    })));\n  };\n  const uncheckAll = () => {\n    setTodos(prev => prev.map(todo => ({\n      ...todo,\n      completed: false\n    })));\n  };\n\n  // フィルター処理\n  const applyFilter = (todos, filter, searchText) => {\n    let result;\n    switch (filter) {\n      case \"completed\":\n        result = todos.filter(t => t.completed);\n        break;\n      case \"incomplete\":\n        result = todos.filter(t => !t.completed);\n        break;\n      default:\n        result = todos;\n    }\n    if (searchText.trim() !== \"\") {\n      result = result.filter(t => t.text.includes(searchText.trim()));\n    }\n    console.log(`[applyFilter] filter: ${filter}, result: ${result},  searchText: ${searchText}`);\n    return result;\n  };\n  const filteredTodos = useMemo(() => {\n    const result = applyFilter(todos, filter, searchText);\n    return result;\n  }, [todos, filter, searchText]);\n\n  // ソート処理\n  const sortedTodos = useMemo(() => {\n    const result = [...filteredTodos].sort((a, b) => {\n      let compare = 0;\n      switch (sortKey) {\n        case \"completed\":\n          compare = Number(a.completed) - Number(b.completed);\n          break;\n        case \"text\":\n          compare = a.text.localeCompare(b.text);\n          break;\n        case \"createdAt\":\n          compare = a.createdAt.localeCompare(b.createdAt);\n          break;\n      }\n      return sortOrder === \"asc\" ? compare : -compare;\n    });\n    console.log(`[sortedTodos] sortKey: ${sortKey}, sortOrder: ${sortOrder}, result:`, result);\n    return result;\n  }, [filteredTodos, sortKey, sortOrder]);\n\n  // ソートキー・順序の設定\n  const handleSort = key => {\n    if (sortKey === key) {\n      // 同じキーなら昇順⇔降順を切り替え\n      setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      // 新しいキーなら昇順で開始\n      setSortKey(key);\n      setSortOrder(\"asc\");\n    }\n  };\n  return {\n    todos,\n    filteredTodos,\n    sortedTodos,\n    filter,\n    setFilter,\n    addTodo,\n    deleteTodo,\n    toggleTodo,\n    updateTodo,\n    deleteChecked,\n    checkAll,\n    uncheckAll,\n    checkedCount,\n    showPopup,\n    setShowPopup,\n    handleSort,\n    sortKey,\n    sortOrder,\n    searchText,\n    setSearchText\n  };\n};\n_s(useTodos, \"2/mbSeasjNJL3+KTv8L1G/n8dvk=\");","map":{"version":3,"names":["useState","useEffect","useRef","useMemo","useTodos","_s","todos","setTodos","filter","setFilter","isInitialized","showPopup","setShowPopup","checkedCount","t","completed","length","sortKey","setSortKey","sortOrder","setSortOrder","searchText","setSearchText","current","fetchTodos","res","fetch","data","json","converted","map","item","_item$tags","id","text","isdone","createdAt","Date","toISOString","tags","error","console","localStorage","setItem","JSON","stringify","log","addTodo","trim","method","headers","body","result","success","newTodo","prev","deleteTodo","target","find","todo","url","URL","searchParams","append","toString","toggleTodo","newIsDone","updateTodo","newText","deleteChecked","checkAll","uncheckAll","applyFilter","includes","filteredTodos","sortedTodos","sort","a","b","compare","Number","localeCompare","handleSort","key"],"sources":["C:/work/study/my-todo-monorepo/frontend/src/hooks/useTodos.ts"],"sourcesContent":["// src/hooks/useTodos.ts\n\nimport { useState, useEffect, useRef, useMemo } from \"react\";\nimport { Todo } from \"../types/todo\";\nimport { Filter } from \"../types/filter\";\n\nexport const useTodos = () => {\n  type SortKey = \"completed\" | \"text\" | \"createdAt\"; // ソートキーの型定義 completed: 完了状態、text: 内容、createdAt: 登録日時\n  type SortOrder = \"asc\" | \"desc\"; // ソート順の型定義 asc: 昇順、desc: 降順\n\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [filter, setFilter] = useState<Filter>(\"all\");\n  const isInitialized = useRef(false); // 初期化フラグ\n  const [showPopup, setShowPopup] = useState(false); // ポップアップの表示状態\n  const checkedCount = useMemo(\n    () => todos.filter((t) => t.completed).length,\n    [todos]\n  ); // チェックされたToDoの数\n  const [sortKey, setSortKey] = useState<SortKey>(\"createdAt\");\n  const [sortOrder, setSortOrder] = useState<SortOrder>(\"asc\");\n  const [searchText, setSearchText] = useState(\"\"); // 検索テキスト\n\n  // 初期読み込み\n  useEffect(() => {\n    if (isInitialized.current) return;\n\n    const fetchTodos = async () => {\n      try {\n        const res = await fetch(\"http://localhost/api/todos.php\");\n        const data = await res.json();\n\n        // ★ API のデータを React 用に変換する\n        const converted = data.map((item: any) => ({\n          id: item.id,\n          text: item.text,\n          completed: item.isdone === 1, // ← isdone を completed に変換\n          createdAt: new Date().toISOString(), // DB に無いので仮で作成\n          tags: item.tags ?? \"\",\n        }));\n\n        setTodos(converted);\n      } catch (error) {\n        console.error(\"API fetch error:\", error);\n      }\n    };\n    fetchTodos();\n    isInitialized.current = true;\n  }, []);\n\n  // 保存処理\n  useEffect(() => {\n    if (!isInitialized.current) return;\n    localStorage.setItem(\"todos\", JSON.stringify(todos));\n    console.log(\"[useEffect保存]todos:\", todos);\n  }, [todos]);\n\n  // 追加\n  const addTodo = async (text: string) => {\n    if (!text.trim()) return;\n\n    try {\n      const res = await fetch(\"http://localhost/api/todos.php\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          text,\n          tags: \"\", // 必要なら後で対応\n        }),\n      });\n\n      const result = await res.json();\n\n      if (result.success) {\n        // API が返した ID を使ってフロント側にも反映\n        const newTodo: Todo = {\n          id: result.id,\n          text,\n          completed: false,\n          createdAt: new Date().toISOString(), // DB に createdAt がないのでフロント側で作成\n        };\n\n        setTodos((prev) => [...prev, newTodo]);\n      }\n    } catch (error) {\n      console.error(\"addTodo API error:\", error);\n    }\n  };\n  // 削除\n  const deleteTodo = async (id: number) => {\n    try {\n      const target = todos.find((todo) => todo.id === id);\n      if (!target) return; // 念のため安全に\n\n      const url = new URL(\"http://localhost/api/todos.php\");\n      url.searchParams.append(\"id\", id.toString());\n\n      const res = await fetch(url.toString(), {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n\n      const result = await res.json();\n\n      if (result.success) {\n        setTodos((prev) => prev.filter((todo) => todo.id !== id));\n      }\n    } catch (error) {\n      console.error(\"deleteTodo API error:\", error);\n    }\n  };\n\n  // 完了切り替え\n  const toggleTodo = async (id: number) => {\n    try {\n      const target = todos.find((todo) => todo.id === id);\n      if (!target) return; // 念のため安全に\n\n      const newIsDone = target.completed ? 0 : 1;\n\n      const url = new URL(\"http://localhost/api/todos.php\");\n      url.searchParams.append(\"id\", id.toString());\n\n      const res = await fetch(url.toString(), {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          isdone: newIsDone,\n        }),\n      });\n\n      const result = await res.json();\n\n      if (result.success) {\n        setTodos((prev) =>\n          prev.map((todo) =>\n            todo.id === id ? { ...todo, completed: !todo.completed } : todo\n          )\n        );\n      }\n    } catch (error) {\n      console.error(\"toggleTodo API error:\", error);\n    }\n  };\n\n  // 編集\n  const updateTodo = async (id: number, newText: string) => {\n    try {\n      const target = todos.find((todo) => todo.id === id);\n      if (!target) return; // 念のため安全に\n\n      const url = new URL(\"http://localhost/api/todos.php\");\n      url.searchParams.append(\"id\", id.toString());\n\n      const res = await fetch(url.toString(), {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          text: newText,\n        }),\n      });\n\n      const result = await res.json();\n\n      if (result.success) {\n        setTodos((prev) =>\n          prev.map((todo) =>\n            todo.id === id ? { ...todo, text: newText } : todo\n          )\n        );\n      }\n    } catch (error) {\n      console.error(\"updateTodo API error:\", error);\n    }\n  };\n\n  // 一括削除\n  const deleteChecked = async () => {\n    try {\n      const res = await fetch(\"http://localhost/api/todos.php\", {\n        method: \"DELETE\",\n      });\n\n      const result = await res.json();\n\n      if (result.success) {\n        setTodos((prev) => prev.filter((todo) => !todo.completed));\n      }\n    } catch (error) {\n      console.error(\"deleteCompleted API error:\", error);\n    }\n  };\n\n  // 一括完了・未完了\n  const checkAll = () => {\n    setTodos((prev) => prev.map((todo) => ({ ...todo, completed: true })));\n  };\n  const uncheckAll = () => {\n    setTodos((prev) => prev.map((todo) => ({ ...todo, completed: false })));\n  };\n\n  // フィルター処理\n  const applyFilter = (todos: Todo[], filter: Filter, searchText: string) => {\n    let result: Todo[];\n\n    switch (filter) {\n      case \"completed\":\n        result = todos.filter((t) => t.completed);\n        break;\n      case \"incomplete\":\n        result = todos.filter((t) => !t.completed);\n        break;\n      default:\n        result = todos;\n    }\n    if (searchText.trim() !== \"\") {\n      result = result.filter((t) => t.text.includes(searchText.trim()));\n    }\n\n    console.log(\n      `[applyFilter] filter: ${filter}, result: ${result},  searchText: ${searchText}`\n    );\n    return result;\n  };\n\n  const filteredTodos = useMemo(() => {\n    const result = applyFilter(todos, filter, searchText);\n    return result;\n  }, [todos, filter, searchText]);\n\n  // ソート処理\n  const sortedTodos = useMemo(() => {\n    const result = [...filteredTodos].sort((a, b) => {\n      let compare = 0;\n      switch (sortKey) {\n        case \"completed\":\n          compare = Number(a.completed) - Number(b.completed);\n          break;\n        case \"text\":\n          compare = a.text.localeCompare(b.text);\n          break;\n        case \"createdAt\":\n          compare = a.createdAt.localeCompare(b.createdAt);\n          break;\n      }\n      return sortOrder === \"asc\" ? compare : -compare;\n    });\n\n    console.log(\n      `[sortedTodos] sortKey: ${sortKey}, sortOrder: ${sortOrder}, result:`,\n      result\n    );\n    return result;\n  }, [filteredTodos, sortKey, sortOrder]);\n\n  // ソートキー・順序の設定\n  const handleSort = (key: SortKey) => {\n    if (sortKey === key) {\n      // 同じキーなら昇順⇔降順を切り替え\n      setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      // 新しいキーなら昇順で開始\n      setSortKey(key);\n      setSortOrder(\"asc\");\n    }\n  };\n\n  return {\n    todos,\n    filteredTodos,\n    sortedTodos,\n    filter,\n    setFilter,\n    addTodo,\n    deleteTodo,\n    toggleTodo,\n    updateTodo,\n    deleteChecked,\n    checkAll,\n    uncheckAll,\n    checkedCount,\n    showPopup,\n    setShowPopup,\n    handleSort,\n    sortKey,\n    sortOrder,\n    searchText,\n    setSearchText,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}