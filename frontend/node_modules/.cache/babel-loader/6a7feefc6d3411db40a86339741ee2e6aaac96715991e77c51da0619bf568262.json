{"ast":null,"code":"var _jsxFileName = \"C:\\\\work\\\\study\\\\my-todo-monorepo\\\\frontend\\\\src\\\\components\\\\TodoItem.tsx\",\n  _s = $RefreshSig$();\n// src/components/TodoItem.tsx\nimport React, { useState, useRef } from \"react\";\n// TODOの型定義\nimport StyledInput from \"../components/StyledInput\"; // スタイリングされた入力コンポーネント\nimport StyledButton from \"../components/StyledButton\"; // スタイリングされたボタンコンポーネント\nimport StyledDate from \"../components/StyledDate\"; // スタイリングされた日付コンポーネント\nimport StyledText from \"../components/StyledText\"; // スタイリングされたテキストコンポーネント\nimport StyledClearButton from \"../components/StyledClearButton\"; // \"×\"スタイリングされたクリアボタンコンポーネント\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TodoItem = ({\n  todo,\n  deleteTodo,\n  toggleTodo,\n  updateTodo\n}) => {\n  _s();\n  const [isEditing, setIsEditing] = useState(false); // 編集モードの状態管理\n  const [editText, setEditText] = useState(todo.text); // 編集中のテキスト管理\n  const [prevEditText, setPrevEditText] = useState(\"\"); // 前回の検索テキスト管理\n  const inputRef = useRef(null); // テキスト入力のref\n\n  // 編集確定処理\n  const handleUpdate = () => {\n    console.log(\"[handleUpdate:内容編集確定] editText:\", editText);\n    const trimmed = editText.trim();\n    if (trimmed === \"\") return;\n    updateTodo(todo.id, trimmed);\n    setIsEditing(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: todo.completed,\n        onChange: e => toggleTodo(todo.id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"relative\",\n          display: \"inline-block\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(StyledInput, {\n          ref: inputRef,\n          type: \"text\",\n          value: editText,\n          onChange: e => setEditText(e.target.value),\n          onBlur: handleUpdate,\n          onKeyDown: e => {\n            if (e.key === \"Enter\") handleUpdate();\n          },\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StyledClearButton\n        // onClickだとテキストボックスのonBlurが優先されるため、onMouseDownで対応\n        , {\n          onMouseDown: e => {\n            var _inputRef$current;\n            e.preventDefault(); // フォーカスが外れるのを防ぐ\n            setEditText(prevEditText); // 編集前に戻す\n            (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus(); // テキストボックスにフォーカス移動\n          },\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(StyledText, {\n        checked: todo.completed,\n        onClick: () => {\n          setIsEditing(true);\n          setPrevEditText(todo.text);\n        } // 編集前のテキストを保存\n        ,\n        title: \"\\u30AF\\u30EA\\u30C3\\u30AF\\u3057\\u3066\\u7DE8\\u96C6\",\n        children: todo.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(StyledDate, {\n        children: [\"\\u767B\\u9332\\u65E5\\u6642: \", todo.createdAt]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      children: /*#__PURE__*/_jsxDEV(StyledButton\n      // onClickだとフォーカスが外れてしまうため、onMouseDownで対応\n      , {\n        onMouseDown: e => {\n          e.preventDefault(); // フォーカスを維持\n          deleteTodo(todo.id);\n        },\n        children: \"\\u524A\\u9664\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n};\n_s(TodoItem, \"1p+2sf3fxHFMVVQXZwF5UKVD7Sg=\");\n_c = TodoItem;\nexport default TodoItem;\nvar _c;\n$RefreshReg$(_c, \"TodoItem\");","map":{"version":3,"names":["React","useState","useRef","StyledInput","StyledButton","StyledDate","StyledText","StyledClearButton","jsxDEV","_jsxDEV","TodoItem","todo","deleteTodo","toggleTodo","updateTodo","_s","isEditing","setIsEditing","editText","setEditText","text","prevEditText","setPrevEditText","inputRef","handleUpdate","console","log","trimmed","trim","id","children","type","checked","completed","onChange","e","fileName","_jsxFileName","lineNumber","columnNumber","style","position","display","ref","value","target","onBlur","onKeyDown","key","autoFocus","onMouseDown","_inputRef$current","preventDefault","current","focus","onClick","title","createdAt","_c","$RefreshReg$"],"sources":["C:/work/study/my-todo-monorepo/frontend/src/components/TodoItem.tsx"],"sourcesContent":["// src/components/TodoItem.tsx\r\nimport React, { useState, useRef } from \"react\";\r\nimport { Todo } from \"../types/todo\"; // TODOの型定義\r\nimport StyledInput from \"../components/StyledInput\"; // スタイリングされた入力コンポーネント\r\nimport StyledButton from \"../components/StyledButton\"; // スタイリングされたボタンコンポーネント\r\nimport StyledDate from \"../components/StyledDate\"; // スタイリングされた日付コンポーネント\r\nimport StyledText from \"../components/StyledText\"; // スタイリングされたテキストコンポーネント\r\nimport StyledClearButton from \"../components/StyledClearButton\"; // \"×\"スタイリングされたクリアボタンコンポーネント\r\n\r\ninterface Props {\r\n  todo: Todo;\r\n  deleteTodo: (id: number) => void; // propsの型定義\r\n  toggleTodo: (id: number) => void; // propsの型定義\r\n  updateTodo: (id: number, newText: string) => void; // propsの型定義\r\n}\r\n\r\nconst TodoItem: React.FC<Props> = ({\r\n  todo,\r\n  deleteTodo,\r\n  toggleTodo,\r\n  updateTodo,\r\n}) => {\r\n  const [isEditing, setIsEditing] = useState(false); // 編集モードの状態管理\r\n  const [editText, setEditText] = useState(todo.text); // 編集中のテキスト管理\r\n  const [prevEditText, setPrevEditText] = useState(\"\"); // 前回の検索テキスト管理\r\n  const inputRef = useRef<HTMLInputElement>(null); // テキスト入力のref\r\n\r\n  // 編集確定処理\r\n  const handleUpdate = () => {\r\n    console.log(\"[handleUpdate:内容編集確定] editText:\", editText);\r\n    const trimmed = editText.trim();\r\n    if (trimmed === \"\") return;\r\n    updateTodo(todo.id, trimmed);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        {/* ＜完了＞チェックボックス */}\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={todo.completed}\r\n          onChange={(e) => toggleTodo(todo.id)}\r\n        />\r\n      </td>\r\n\r\n      <td>\r\n        {/* ＜TODOの内容＞テキストボックス　または　text */}\r\n        {isEditing ? (\r\n          <div style={{ position: \"relative\", display: \"inline-block\" }}>\r\n            <StyledInput\r\n              ref={inputRef}\r\n              type=\"text\"\r\n              value={editText}\r\n              onChange={(e) => setEditText(e.target.value)}\r\n              onBlur={handleUpdate}\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") handleUpdate();\r\n              }}\r\n              autoFocus\r\n            />\r\n            {/* ×ボタン 編集前に戻す*/}\r\n            <StyledClearButton\r\n              // onClickだとテキストボックスのonBlurが優先されるため、onMouseDownで対応\r\n              onMouseDown={(e) => {\r\n                e.preventDefault(); // フォーカスが外れるのを防ぐ\r\n                setEditText(prevEditText); // 編集前に戻す\r\n                inputRef.current?.focus(); // テキストボックスにフォーカス移動\r\n              }}\r\n            >\r\n              ×\r\n            </StyledClearButton>{\" \"}\r\n          </div>\r\n        ) : (\r\n          <StyledText\r\n            checked={todo.completed}\r\n            onClick={\r\n              () => {\r\n                setIsEditing(true);\r\n                setPrevEditText(todo.text);\r\n              } // 編集前のテキストを保存\r\n            }\r\n            title=\"クリックして編集\"\r\n          >\r\n            {todo.text}\r\n          </StyledText>\r\n        )}\r\n      </td>\r\n\r\n      <td>\r\n        {/* ＜登録日時＞ */}\r\n        <StyledDate>登録日時: {todo.createdAt}</StyledDate>\r\n      </td>\r\n\r\n      <td>\r\n        {/* ＜削除＞ボタン */}\r\n        <StyledButton\r\n          // onClickだとフォーカスが外れてしまうため、onMouseDownで対応\r\n          onMouseDown={(e) => {\r\n            e.preventDefault(); // フォーカスを維持\r\n            deleteTodo(todo.id);\r\n          }}\r\n        >\r\n          削除\r\n        </StyledButton>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default TodoItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}